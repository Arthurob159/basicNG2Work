import {Component} from '@angular/core';

@Component({
  selector: 'secondTask',
  styleUrls: ['./secondTask.component.css'],
  templateUrl: './secondTask.component.html'
})
export class SecondTaskComponent {
  private json : {}[];

  constructor(
                // private route: ActivatedRoute,
                // private itemService : ItemService
  ) { }

  ngOnInit() {
    let json= [{"administrator":"","client_company_name":"test1","client_id":-1,"database_id":1071,"database_name":"ATR_HAMAT","instance_name":"SQL2014EXPRESS","is_vip":0,"partner_company_name":null,"partner_id":-1,"server_group_name":"","server_id":22,"server_name":"LOCALHOST\\SQL2014EXPRESS"},
      
      {"administrator":"","client_company_name":"test1","client_id":-1,"database_id":1067,"database_name":"master","instance_name":"SQL2014EXPRESS","is_vip":0,"partner_company_name":null,"partner_id":-1,"server_group_name":"","server_id":22,"server_name":"LOCALHOST\\SQL2014EXPRESS"}
      ,{"administrator":"","client_company_name":"test1","client_id":-1,"database_id":1069,"database_name":"model","instance_name":"SQL2014EXPRESS","is_vip":0,"partner_company_name":null,"partner_id":-1,"server_group_name":"","server_id":22,"server_name":"LOCALHOST\\SQL2014EXPRESS"},{"administrator":"","client_company_name":"test1","client_id":-1,"database_id":1070,"database_name":"msdb","instance_name":"SQL2014EXPRESS","is_vip":0,"partner_company_name":null,"partner_id":-1,"server_group_name":"","server_id":22,"server_name":"LOCALHOST\\SQL2014EXPRESS"},{"administrator":"","client_company_name":"test1","client_id":-1,"database_id":1072,"database_name":"posgold","instance_name":"SQL2014EXPRESS","is_vip":0,"partner_company_name":null,"partner_id":-1,"server_group_name":"","server_id":22,"server_name":"LOCALHOST\\SQL2014EXPRESS"},{"administrator":"","client_company_name":"test1","client_id":-1,"database_id":1073,"database_name":"Pulse","instance_name":"SQL2014EXPRESS","is_vip":0,"partner_company_name":null,"partner_id":-1,"server_group_name":"","server_id":22,"server_name":"LOCALHOST\\SQL2014EXPRESS"},{"administrator":"","client_company_name":"test1","client_id":-1,"database_id":1074,"database_name":"sqlmanage","instance_name":"SQL2014EXPRESS","is_vip":0,"partner_company_name":null,"partner_id":-1,"server_group_name":"","server_id":22,"server_name":"LOCALHOST\\SQL2014EXPRESS"},{"administrator":"","client_company_name":"test1","client_id":-1,"database_id":1068,"database_name":"tempdb","instance_name":"SQL2014EXPRESS","is_vip":0,"partner_company_name":null,"partner_id":-1,"server_group_name":"","server_id":22,"server_name":"LOCALHOST\\SQL2014EXPRESS"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1080,"database_name":"hmi","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1075,"database_name":"master","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1081,"database_name":"mivni04","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1082,"database_name":"mivnim","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1077,"database_name":"model","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1078,"database_name":"msdb","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1084,"database_name":"pol1999","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1098,"database_name":"pol99t","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1085,"database_name":"polch","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1086,"database_name":"poleng","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1137,"database_name":"polfr","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1079,"database_name":"poliram","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1087,"database_name":"polit","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1088,"database_name":"polsp","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1089,"database_name":"poluk","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1090,"database_name":"polusho","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1095,"database_name":"polyold","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1091,"database_name":"pritempdb","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1092,"database_name":"sp26515","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1099,"database_name":"sqlmanage","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1083,"database_name":"sqlmanage_OLD","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1093,"database_name":"system","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1097,"database_name":"t020216","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1096,"database_name":"t180916","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1094,"database_name":"t80215i","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1076,"database_name":"tempdb","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":24,"server_name":"ERP\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1105,"database_name":"hmi","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1100,"database_name":"master","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1106,"database_name":"mivni04","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1107,"database_name":"mivnim","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1102,"database_name":"model","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1103,"database_name":"msdb","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1108,"database_name":"pol1999","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1109,"database_name":"pol99t","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1110,"database_name":"polch","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1111,"database_name":"poleng","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1112,"database_name":"poliram","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1113,"database_name":"polit","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1114,"database_name":"polsp","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1115,"database_name":"poluk","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1116,"database_name":"polusho","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1117,"database_name":"polyold","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1118,"database_name":"pritempdb","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1119,"database_name":"sp26515","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1104,"database_name":"sqlmanage","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1120,"database_name":"system","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1121,"database_name":"t020216","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1122,"database_name":"t180916","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1123,"database_name":"t80215i","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1101,"database_name":"tempdb","instance_name":"PRI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":25,"server_name":"ERP-DR1\\PRI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1138,"database_name":"A","instance_name":"EZMANAGE","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"","server_id":26,"server_name":"ERP-TEST2\\EZMANAGE"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1124,"database_name":"master","instance_name":"EZMANAGE","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"","server_id":26,"server_name":"ERP-TEST2\\EZMANAGE"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1126,"database_name":"model","instance_name":"EZMANAGE","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"","server_id":26,"server_name":"ERP-TEST2\\EZMANAGE"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1127,"database_name":"msdb","instance_name":"EZMANAGE","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"","server_id":26,"server_name":"ERP-TEST2\\EZMANAGE"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1129,"database_name":"sqlmanage","instance_name":"EZMANAGE","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"","server_id":26,"server_name":"ERP-TEST2\\EZMANAGE"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1128,"database_name":"sqlmanage_OLD","instance_name":"EZMANAGE","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"","server_id":26,"server_name":"ERP-TEST2\\EZMANAGE"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1125,"database_name":"tempdb","instance_name":"EZMANAGE","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"","server_id":26,"server_name":"ERP-TEST2\\EZMANAGE"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1130,"database_name":"Tet2","instance_name":"EZMANAGE","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"","server_id":26,"server_name":"ERP-TEST2\\EZMANAGE"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1136,"database_name":"HMI_DATA","instance_name":"HMI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":27,"server_name":"POLY-PF1\\HMI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1131,"database_name":"master","instance_name":"HMI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":27,"server_name":"POLY-PF1\\HMI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1133,"database_name":"model","instance_name":"HMI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":27,"server_name":"POLY-PF1\\HMI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1134,"database_name":"msdb","instance_name":"HMI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":27,"server_name":"POLY-PF1\\HMI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1135,"database_name":"sqlmanage","instance_name":"HMI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":27,"server_name":"POLY-PF1\\HMI"},{"administrator":"","client_company_name":"polyram","client_id":-1,"database_id":1132,"database_name":"tempdb","instance_name":"HMI","is_vip":0,"partner_company_name":"DBASRV","partner_id":36,"server_group_name":"- Default Servers Group -","server_id":27,"server_name":"POLY-PF1\\HMI"}]
      
      //testing
      let admins                 = json.map(obj => {return obj.administrator});
      let partners_id            = json.map(obj => {return obj.partner_id});
      let partners_company_name  = json.map(obj => {return obj.partner_company_name});
      let clients_id             = json.map(obj => {return obj.client_id});
      let clients_company_name   = json.map(obj => {return obj.client_company_name});
      let servers_id             = json.map(obj => {return obj.server_id});
      let servers_name           = json.map(obj => {return obj.server_name});
      let servers_group_name     = json.map(obj => {return obj.server_group_name});
      let databases_id           = json.map(obj => {return obj.database_id});
      let databases_name         = json.map(obj => {return obj.database_name});

      
      let sortedJson = [{'administrator'                               : getUniqueArr(admins),
                             'partners'  : [{'partner_id'              : getUniqueArr(partners_id),
                                             'partner_company_name'    : getUniqueArr(partners_company_name),
                                 'clients' : [{'client_id'             : getUniqueArr(clients_id),
                                               'client_company_name'   : getUniqueArr(clients_company_name),
                                     'servers' : [{'server_id'         : getUniqueArr(servers_id),
                                                   'server_name'       : getUniqueArr(servers_name),
                                                   'server_group_name' : getUniqueArr(servers_group_name),
                                         'databases' : [{'database_id' : getUniqueArr(databases_id),
                                            'database_name'            : getUniqueArr(databases_name)}]}]}]}]
                       }];

      console.log('sortedJsonObj: ', sortedJson);
      console.log('sortedJsonStr: ', JSON.stringify(sortedJson));
      

      function getUniqueArr(arr){
          var uniqueArr = [];
          var nextValue;
          arr=arr.sort();
          for (var i = 0; i < arr.length; i++) {
              if( arr[i] != nextValue) {
                  nextValue = arr[i] ;
                  uniqueArr.push(nextValue);
              }
          }
          return uniqueArr;
      }
      
   }
}
